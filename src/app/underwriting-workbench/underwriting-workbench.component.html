<!-- Remove the duplicate mode-banner -->
<!-- <app-mode-banner
  [isEditMode]="isEditMode"
  (editModeChange)="onEditModeChange($event)"
></app-mode-banner> -->

<!-- Action Buttons removed -->

<div class="workbench-container">
  <!-- Comment out the duplicate header -->
  <!-- 
  <div class="workbench-header" [class.collapsed]="isHeaderCollapsed">
    <div class="header-top" (click)="toggleHeader()">
      <div class="application-id">
        <h2>Application #{{applicationId}}</h2>
      </div>
      
      <div class="essential-info">
        <div class="detail-item">
          <div class="label">Applicant</div>
          <div class="value">{{applicantName}}</div>
        </div>
        <div class="detail-item">
          <div class="label">Coverage</div>
          <div class="value">{{amount}}</div>
        </div>
        <div class="detail-item">
          <div class="label">Gender/Age</div>
          <div class="value">{{gender}} / {{age}} yrs</div>
        </div>
        <div class="detail-item">
          <div class="label">Product</div>
          <div class="value">{{product}}</div>
        </div>
        <div class="detail-item">
          <div class="label">Status</div>
          <div class="value highlight">{{status}}</div>
        </div>
      </div>
      
      <button mat-icon-button class="toggle-header-btn" (click)="toggleHeader(); $event.stopPropagation()">
        <mat-icon>{{ isHeaderCollapsed ? 'expand_more' : 'expand_less' }}</mat-icon>
      </button>
    </div>
  -->
    
  <!-- Redesigned Application Details Component -->
  <div class="redesigned-application-details">
    <div class="details-card">
      <div class="card-header" (click)="toggleRedesignedDetails()">
        <h3 class="card-title">
          <mat-icon>description</mat-icon>
          ID #{{applicationId}}
        </h3>
        <div class="collapsed-info">
          <div class="info-item" matTooltip="Applicant">
            <mat-icon class="info-icon">person</mat-icon>
            <span class="value highlight">{{applicantName}}</span>
          </div>
          <div class="info-item" matTooltip="Coverage">
            <mat-icon class="info-icon">attach_money</mat-icon>
            <span class="value">{{amount}}</span>
          </div>
          <div class="info-item hide-xs" matTooltip="Gender/Age">
            <mat-icon class="info-icon">face</mat-icon>
            <span class="value">{{gender}} / {{age}} yrs</span>
          </div>
          <div class="info-item hide-sm" matTooltip="Product">
            <mat-icon class="info-icon">inventory_2</mat-icon>
            <span class="value">{{product}}</span>
          </div>
          <div class="info-item" matTooltip="Status">
            <mat-icon class="info-icon">pending</mat-icon>
            <span class="value highlight">{{status}}</span>
          </div>
        </div>
        <button mat-icon-button class="toggle-details-btn" (click)="toggleRedesignedDetails(); $event.stopPropagation()">
          <mat-icon [style.transform]="isRedesignedDetailsCollapsed ? 'rotate(0deg)' : 'rotate(180deg)'">expand_more</mat-icon>
        </button>
      </div>
      <div class="card-content" [@expandCollapse]="isRedesignedDetailsCollapsed ? 'collapsed' : 'expanded'">
        <div class="details-grid-modern">
          <!-- Application Details -->
          <div class="detail-group">
            <h4 class="group-title">Application Details</h4>
            <div class="detail-row">
              <div class="detail-item-modern">
                <div class="icon-container">
                  <mat-icon>badge</mat-icon>
                </div>
                <div class="detail-content">
                  <div class="label">Application Number</div>
                  <div class="value">{{applicationNumber}}</div>
                </div>
              </div>
              
              <div class="detail-item-modern">
                <div class="icon-container">
                  <mat-icon>how_to_reg</mat-icon>
                </div>
                <div class="detail-content">
                  <div class="label">Application Method</div>
                  <div class="value">{{applicationMethod}}</div>
                </div>
              </div>
            </div>
            
            <div class="detail-row">
              <div class="detail-item-modern">
                <div class="icon-container">
                  <mat-icon>person</mat-icon>
                </div>
                <div class="detail-content">
                  <div class="label">Assigned UW</div>
                  <div class="value">{{assignedUW}}</div>
                </div>
              </div>
              
              <div class="detail-item-modern">
                <div class="icon-container">
                  <mat-icon>attach_money</mat-icon>
                </div>
                <div class="detail-content">
                  <div class="label">Total Active & Pending Face Amount</div>
                  <div class="value">{{totalFaceAmount}}</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Case Status -->
          <div class="detail-group">
            <h4 class="group-title">Case Status</h4>
            <div class="status-container">
              <div class="status-indicator" [ngClass]="{'pending': true}">
                <mat-icon>pending</mat-icon>
                <span>{{status}}</span>
              </div>
              
              <div class="status-details">
                <div class="status-item">
                  <div class="label">Reason(s)</div>
                  <div class="value">{{reason}}</div>
                </div>
                <div class="status-item">
                  <div class="label">Last Updated</div>
                  <div class="value">Today, 2:30 PM</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Application Tracker - Directly on background -->
  <div class="application-tracker" role="region" aria-label="Application Progress Tracker" *ngIf="!isHeaderCollapsed">
    <div class="tracker-scroll-container">
      <div class="tracker-steps" role="list" #trackerSteps>
        <div class="step completed" role="listitem">
          <div class="step-indicator">
            <div class="step-icon">
              <mat-icon>done</mat-icon>
            </div>
            <div class="step-line"></div>
          </div>
          <div class="step-content">
            <span class="step-label">New</span>
            <span class="step-date">Jan 15</span>
          </div>
        </div>

        <div class="step completed" role="listitem">
          <div class="step-indicator">
            <div class="step-icon">
              <mat-icon>done</mat-icon>
            </div>
            <div class="step-line"></div>
          </div>
          <div class="step-content">
            <span class="step-label">App Started</span>
            <span class="step-date">Jan 16</span>
          </div>
        </div>

        <div class="step completed" role="listitem">
          <div class="step-indicator">
            <div class="step-icon">
              <mat-icon>done</mat-icon>
            </div>
            <div class="step-line"></div>
          </div>
          <div class="step-content">
            <span class="step-label">App Signed</span>
            <span class="step-date">Jan 17</span>
          </div>
        </div>

        <div class="step active" role="listitem" aria-current="step">
          <div class="step-indicator">
            <div class="step-icon">
              <mat-icon>pending_actions</mat-icon>
            </div>
            <div class="step-line"></div>
          </div>
          <div class="step-content">
            <span class="step-label">Evidence Required</span>
            <span class="step-date">Current</span>
          </div>
        </div>

        <div class="step" role="listitem">
          <div class="step-indicator">
            <div class="step-icon">
              <mat-icon>radio_button_unchecked</mat-icon>
            </div>
            <div class="step-line"></div>
          </div>
          <div class="step-content">
            <span class="step-label">UW Review</span>
          </div>
        </div>

        <div class="step" role="listitem">
          <div class="step-indicator">
            <div class="step-icon">
              <mat-icon>radio_button_unchecked</mat-icon>
            </div>
            <div class="step-line"></div>
          </div>
          <div class="step-content">
            <span class="step-label">Approved</span>
          </div>
        </div>

        <div class="step" role="listitem">
          <div class="step-indicator">
            <div class="step-icon">
              <mat-icon>radio_button_unchecked</mat-icon>
            </div>
            <div class="step-line"></div>
          </div>
          <div class="step-content">
            <span class="step-label">Offer Made</span>
          </div>
        </div>

        <div class="step" role="listitem">
          <div class="step-indicator">
            <div class="step-icon">
              <mat-icon>radio_button_unchecked</mat-icon>
            </div>
            <div class="step-line"></div>
          </div>
          <div class="step-content">
            <span class="step-label">Offer Accepted</span>
          </div>
        </div>

        <div class="step" role="listitem">
          <div class="step-indicator">
            <div class="step-icon">
              <mat-icon>radio_button_unchecked</mat-icon>
            </div>
            <div class="step-line"></div>
          </div>
          <div class="step-content">
            <span class="step-label">Paid</span>
          </div>
        </div>

        <div class="step" role="listitem">
          <div class="step-indicator">
            <div class="step-icon">
              <mat-icon>radio_button_unchecked</mat-icon>
            </div>
          </div>
          <div class="step-content">
            <span class="step-label">Active</span>
          </div>
        </div>
      </div>
      <button class="scroll-indicator left" #trackerLeftIndicator (click)="scrollTrackerLeft()" [class.visible]="canScrollTrackerLeft">
        <mat-icon>chevron_left</mat-icon>
      </button>
      <button class="scroll-indicator right" #trackerRightIndicator (click)="scrollTrackerRight()" [class.visible]="canScrollTrackerRight">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Left Navigation -->
    <nav class="left-nav" [class.collapsed]="isNavCollapsed">
      <div class="nav-header">
        <button mat-icon-button class="toggle-btn" (click)="isNavCollapsed = !isNavCollapsed" matTooltip="{{isNavCollapsed ? 'Expand' : 'Collapse'}} Navigation">
          <mat-icon>{{isNavCollapsed ? 'chevron_right' : 'chevron_left'}}</mat-icon>
        </button>
      </div>

      <!-- Mobile Tab Navigation - Horizontal scrollable tiles for all items -->
      <div class="mobile-tab-nav">
        <div class="tab-scroll-container">
          <button *ngFor="let item of workboardItems" 
                  class="tab-button" 
                  [class.active]="activeRoute === item.route"
                  (click)="navigateTo(item.route)">
            <mat-icon>{{item.icon}}</mat-icon>
            <span>{{getMobileNavName(item.name)}}</span>
          </button>
        </div>
        <button class="scroll-indicator left" #leftIndicator (click)="scrollLeft()" [class.visible]="canScrollLeft">
          <mat-icon>chevron_left</mat-icon>
        </button>
        <button class="scroll-indicator right" #rightIndicator (click)="scrollRight()" [class.visible]="canScrollRight">
          <mat-icon>chevron_right</mat-icon>
        </button>
      </div>

      <!-- Desktop Navigation List - Hidden on small screens -->
      <ul class="nav-list">
        <li *ngFor="let item of workboardItems" class="nav-item" [class.active]="activeRoute === item.route">
          <a class="nav-link" [routerLink]="['/underwriting', item.route]" routerLinkActive="active" [matTooltip]="isNavCollapsed ? item.name : ''" [matTooltipPosition]="'right'">
            <mat-icon>{{item.icon}}</mat-icon>
            <span *ngIf="!isNavCollapsed">{{item.name}}</span>
          </a>
        </li>
      </ul>
    </nav>

    <!-- Content Area -->
    <div class="content-area">
      <router-outlet></router-outlet>
    </div>
  </div>
</div> 